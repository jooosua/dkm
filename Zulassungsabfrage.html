<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pangaea Life – Zulassung erfassen</title>
    <meta name="color-scheme" content="light only" />
    <style>
      :root {
        --pl-blue: #004a99;
        --pl-accent: #1b5ef5;
        --pl-bg: #f3f5f7;
        --pl-card: #ffffff;
        --pl-text: #2b2b2b;
        --pl-muted: #6b7280;
        --radius: 14px;
      }

      body {
        margin: 0;
        font-family: "Segoe UI", Roboto, Arial, sans-serif;
        background: var(--pl-bg);
        color: var(--pl-text);
        -webkit-font-smoothing: antialiased;
      }

      .container {
        max-width: 560px;
        margin: 5vh auto;
        background: var(--pl-card);
        border-radius: var(--radius);
        overflow: hidden;
        box-shadow: 0 12px 30px rgba(0, 0, 0, 0.08);
      }

      .header {
        background: linear-gradient(135deg, var(--pl-blue), #0b57c2);
        padding: 28px 24px 22px;
        text-align: center;
      }

      .logo {
        max-width: 190px;
        height: auto;
        margin-bottom: 12px;
      }

      h1 {
        margin: 18px 0 12px;
        text-align: center;
        color: var(--pl-blue);
        font-size: 1.5rem;
      }

      p.lead {
        text-align: center;
        color: var(--pl-muted);
        margin: 0 auto 24px;
        font-size: 15px;
        max-width: 48ch;
      }

      label {
        display: block;
        margin: 14px 0 6px;
        font-weight: 600;
      }

      select,
      input[type="text"] {
        width: 100%;
        padding: 12px 14px;
        border: 1px solid #d9dde3;
        border-radius: 10px;
        font-size: 16px;
        background: #fff;
        box-sizing: border-box;
      }

      select[multiple] {
        height: auto;
      }

      select:focus,
      input:focus {
        border-color: var(--pl-accent);
        box-shadow: 0 0 0 3px rgba(27, 94, 245, 0.15);
        outline: none;
      }

      .cta {
        margin-top: 22px;
        width: 100%;
        padding: 15px;
        font-size: 17px;
        font-weight: 700;
        border: 0;
        border-radius: 12px;
        color: #fff;
        background: linear-gradient(90deg, var(--pl-accent), var(--pl-blue));
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .cta:hover {
        transform: translateY(-1px);
        box-shadow: 0 8px 18px rgba(27, 94, 245, 0.3);
      }

      .success {
        display: none;
        margin-top: 18px;
        text-align: center;
        color: #15803d;
        font-weight: 700;
      }

      .foot {
        background: #f0f2f5;
        border-top: 1px solid #e0e4ea;
        padding: 18px 14px;
        text-align: center;
        font-size: 12px;
        color: #555;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <!-- HEADER -->
      <div class="header">
        <img
          class="logo"
          src="https://www.pangaea-life.de/.resources/bayerische-lm/webresources/pangaea-life/img/pangaea-life-logo-white.svg"
          alt="Pangaea Life"
        />
      </div>

      <!-- CONTENT -->
      <div class="content" style="padding: 28px 26px 32px;">
        <h1>Zulassung erfassen</h1>
        <p class="lead">
          Bitte teilen Sie uns Ihre Vermittlerzulassung mit, damit wir Sie
          künftig gezielt informieren können.
        </p>

        <!-- Unsichtbarer iFrame -->
        <iframe name="hidden_iframe" id="hidden_iframe" style="display: none;"></iframe>

        <form
          id="leadForm"
          action="https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8"
          method="POST"
          target="hidden_iframe"
        >
          <input type="hidden" name="oid" value="00D06000001lc1a" />
          <input type="hidden" name="retURL" value="" />

          <!-- Versteckte Lead-ID -->
          <input type="hidden" id="Lead_Id_External__c" name="Lead_Id_External__c" />

          <!-- Zulassung -->
          <label for="Zulassung_vorhanden__c">Ihre Vermittlerzulassung(en)*</label>
          <select id="Zulassung_vorhanden__c" name="Zulassung_vorhanden__c" multiple required>
            <option value="§ 34f Abs. 1 GewO">§ 34f Abs. 1 GewO</option>
            <option value="§ 34f Abs. 2 GewO">§ 34f Abs. 2 GewO</option>
            <option value="§ 34d GewO">§ 34d GewO</option>
            <option value="Sonstige">Sonstige</option>
          </select>

          <div id="detailsField" style="display: none;">
            <label for="Zulassungsdetails__c">Bitte angeben:</label>
            <input
              id="Zulassungsdetails__c"
              name="Zulassungsdetails__c"
              type="text"
              maxlength="80"
              placeholder="z. B. §34i GewO"
            />
          </div>

          <button class="cta" type="submit">Zulassung speichern</button>
          <div class="success" id="successMessage">
            ✅ Danke! Ihre Angaben wurden erfolgreich übermittelt.
          </div>
        </form>
      </div>

      <div class="foot">
        <strong>Pangaea Life GmbH</strong><br />
        Thomas-Dehler-Straße 25, 81737 München<br />
        Telefon: +49 89 6787-0  |  E-Mail: info@pangaea-life.de<br />
        © 2025 Pangaea Life GmbH
      </div>
    </div>

    <script>
      // Lead-ID aus URL auslesen
      (function() {
        const params = new URLSearchParams(window.location.search);
        const rawId = params.get("leadId") || "";
        const cleanId = rawId.replace(/[^A-Za-z0-9]/g, "").slice(0, 18);
        const input = document.getElementById("Lead_Id_External__c");
        if (input) input.value = cleanId;
      })();

      // Detailsfeld nur anzeigen, wenn "Sonstige" gewählt
      const select = document.getElementById("Zulassung_vorhanden__c");
      const details = document.getElementById("detailsField");

      select.addEventListener("change", function() {
        const selected = Array.from(select.selectedOptions).map(o => o.value);
        details.style.display = selected.includes("Sonstige") ? "block" : "none";
      });

      // Erfolgsmeldung + Formular zurücksetzen
      const form = document.getElementById("leadForm");
      const msg = document.getElementById("successMessage");

      form.addEventListener("submit", () => {
        msg.style.display = "block";
        setTimeout(() => form.reset(), 400);
        setTimeout(() => (msg.style.display = "none"), 5000);
      });
    </script>
  </body>
</html>
