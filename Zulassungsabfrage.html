<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Pangaea Life – Zulassung erfassen</title>
<style>
:root {
  --pl-blue: #004a99;
  --pl-accent: #1b5ef5;
  --pl-bg: #f3f5f7;
  --pl-card: #ffffff;
  --pl-text: #2b2b2b;
  --pl-muted: #6b7280;
  --radius: 14px;
}
body {
  margin:0;
  font-family:"Segoe UI", Roboto, Arial, sans-serif;
  background: var(--pl-bg);
  color: var(--pl-text);
  -webkit-font-smoothing: antialiased;
}
.container {
  max-width:560px;
  margin:5vh auto;
  background: var(--pl-card);
  border-radius: var(--radius);
  overflow:hidden;
  box-shadow:0 12px 30px rgba(0,0,0,0.08);
}
.header {
  background: linear-gradient(135deg, var(--pl-blue), #0b57c2);
  padding:28px 24px 22px;
  text-align:center;
}
.logo {
  max-width:190px;
  height:auto;
  margin-bottom:12px;
}
h1 {
  margin:18px 0 12px;
  text-align:center;
  color: var(--pl-blue);
  font-size:1.5rem;
}
p.lead {
  text-align:center;
  color: var(--pl-muted);
  margin:0 auto 24px;
  font-size:15px;
  max-width:48ch;
}
label {
  display:block;
  margin:14px 0 6px;
  font-weight:600;
}
input[type="text"] {
  width:100%;
  padding:12px 14px;
  border:1px solid #d9dde3;
  border-radius:10px;
  font-size:16px;
  background:#fff;
  box-sizing:border-box;
}
input[type="checkbox"] {
  margin-right:8px;
}
.cta {
  margin-top:22px;
  width:100%;
  padding:15px;
  font-size:17px;
  font-weight:700;
  border:0;
  border-radius:12px;
  color:#fff;
  background: linear-gradient(90deg, var(--pl-accent), var(--pl-blue));
  cursor:pointer;
  transition:all 0.2s ease;
}
.cta:hover {
  transform:translateY(-1px);
  box-shadow:0 8px 18px rgba(27,94,245,0.3);
}
.success {
  display:none;
  margin-top:18px;
  text-align:center;
  color:#15803d;
  font-weight:700;
}
.foot {
  background:#f0f2f5;
  border-top:1px solid #e0e4ea;
  padding:18px 14px;
  text-align:center;
  font-size:12px;
  color:#555;
}
.checkbox-group label {
  font-weight: normal;
  display: block;
  margin-bottom: 8px;
}
</style>
</head>
<body>
<div class="container">
  <div class="header">
    <img class="logo" src="https://www.pangaea-life.de/.resources/bayerische-lm/webresources/pangaea-life/img/pangaea-life-logo-white.svg" alt="Pangaea Life">
  </div>

  <div class="content" style="padding:28px 26px 32px;">
    <h1>Zulassung erfassen</h1>
    <p class="lead">Bitte teilen Sie uns Ihre Vermittlerzulassung mit, damit wir Sie künftig gezielt informieren können.</p>

    <iframe name="hidden_iframe" id="hidden_iframe" style="display:none;"></iframe>

    <form id="leadForm" action="https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8" method="POST" target="hidden_iframe">
      <input type="hidden" name="oid" value="00D06000001lc1a">
      <input type="hidden" name="retURL" value="">
      <input type="hidden" id="Lead_Id_External__c" name="Lead_Id_External__c">

      <!-- Zulassungen -->
      <label>Zulassung auswählen*</label>
      <div id="zulassungen" class="checkbox-group">
        <label><input type="checkbox" value="§34F1 GewO"> §34F1 GewO</label>
        <label><input type="checkbox" value="§34F2 GewO"> §34F2 GewO</label>
        <label><input type="checkbox" value="§35D GewO"> §35D GewO</label>
        <label><input type="checkbox" id="sonstigeCheckbox" value="Sonstige"> Sonstige</label>
      </div>

      <div id="sonstigeField" style="display:none;">
        <label for="Zulassung_Sonstige__c">Sonstige Zulassung</label>
        <input type="text" name="Zulassung_Sonstige__c" id="Zulassung_Sonstige__c" placeholder="Bitte eintragen">
      </div>

      <button class="cta" type="submit">Zulassung speichern</button>
      <div class="success" id="successMessage">✅ Danke! Ihre Angaben wurden erfolgreich übermittelt.</div>
    </form>
  </div>

  <div class="foot">
    <strong>Pangaea Life GmbH</strong><br>
    Thomas-Dehler-Straße 25, 81737 München<br>
    Telefon: +49 89 6787-0  |  E-Mail: info@pangaea-life.de<br>
    © 2025 Pangaea Life GmbH
  </div>
</div>

<script>
// Lead-ID aus URL setzen
(function() {
  const params = new URLSearchParams(window.location.search);
  const rawId = params.get("leadId") || "";
  const cleanId = rawId.replace(/[^A-Za-z0-9]/g, "").slice(0, 18);
  const input = document.getElementById("Lead_Id_External__c");
  if(input) input.value = cleanId;
})();

// Sonstige Checkbox steuert Freitextfeld
const sonstigeCheckbox = document.getElementById("sonstigeCheckbox");
const sonstigeField = document.getElementById("sonstigeField");
sonstigeCheckbox.addEventListener('change', () => {
  sonstigeField.style.display = sonstigeCheckbox.checked ? 'block' : 'none';
});

// Alle ausgewählten Zulassungen sammeln und als Semikolon-String setzen
const form = document.getElementById('leadForm');
const successMsg = document.getElementById('successMessage');

form.addEventListener('submit', (e) => {
  const checkboxes = document.querySelectorAll('#zulassungen input[type="checkbox"]');
  const selected = [];
  checkboxes.forEach(cb => {
    if(cb.checked && cb.value !== "Sonstige") selected.push(cb.value);
  });

  // Hidden Input für Salesforce
  let hiddenInput = document.querySelector('input[name="Zulassungsart__c"]');
  if(!hiddenInput){
    hiddenInput = document.createElement('input');
    hiddenInput.type = 'hidden';
    hiddenInput.name = 'Zulassungsart__c';
    form.appendChild(hiddenInput);
  }
  hiddenInput.value = selected.join('; ');

  // Erfolgsmeldung
  successMsg.style.display = 'block';
  setTimeout(()=>form.reset(), 400);
  setTimeout(()=>successMsg.style.display='none',5000);
});
</script>
</body>
</html>
